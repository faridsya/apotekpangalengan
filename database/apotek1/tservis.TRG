TYPE=TRIGGERS
triggers='CREATE DEFINER=`root`@`localhost` TRIGGER `ttservisad` AFTER DELETE ON `tservis` FOR EACH ROW BEGIN\ndelete from tservis_dtl1 where no_servis=old.no_servis;\ndelete from jurnal where no_transaksi=old.no_servis;\n\nEND' 'CREATE DEFINER=`root`@`localhost` TRIGGER `ttservisau` AFTER UPDATE ON `tservis` FOR EACH ROW BEGIN\nif  old.status_servis!=\'diambil\' and new.status_servis=\'diambil\' then\n if new.biaya_servis>=0 then \n	 insert into jurnal values(\'\',new.tgl_out,\'1.1\',\'Kas\',new.biaya_servis,0,new.no_servis,\'\');\n	 insert into jurnal values(\'\',new.tgl_out,\'4.5\',\'   Pendapatan servis\',0,new.biaya_servis,new.no_servis,\'\');\n end if;\n if new.biaya_brg>=0 then \n    insert into jurnal values(\'\',new.tgl_out,\'1.1\',\'Kas\',new.biaya_brg,0,new.no_servis,\'\');\n	 insert into jurnal values(\'\',new.tgl_out,\'8.1\',\'   Penjualan\',0,new.biaya_brg,new.no_servis,\'\');\n	 insert into jurnal values(\'\',new.tgl_out,\'8.2\',\'HPP\',new.hpp,0,new.no_servis,\'\');\n	 insert into jurnal values(\'\',new.tgl_out,\'1.5\',\'   Persediaan barang\',0,new.hpp,new.no_servis,\'\');\n end if;\n if new.komisi_teknisi>=0 then \n	 insert into jurnal values(\'\',new.tgl_out,\'5.9\',\'Beban komisi teknisi\',new.komisi_teknisi,0,new.no_servis,\'\');\n	 insert into jurnal values(\'\',new.tgl_out,\'1.1\',\'   Kas\',0,new.komisi_teknisi,new.no_servis,\'\');\n end if;\n \nend if;\nEND'
sql_modes=1342177280 1342177280
definers='root@localhost' 'root@localhost'
